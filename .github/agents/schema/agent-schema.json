{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/JCrossman/dats-booking/agent-schema.json",
  "title": "Agent Configuration Schema",
  "description": "Schema for DATS Booking multi-agent configuration files",
  "type": "object",
  "required": ["agent", "metadata", "permissions", "modes", "run"],
  "properties": {
    "agent": {
      "type": "object",
      "required": ["name", "id", "version"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Human-readable agent name"
        },
        "id": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$",
          "description": "Machine-readable agent identifier (kebab-case)"
        },
        "version": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+$",
          "description": "Agent version (major.minor)"
        },
        "description": {
          "type": "string",
          "description": "Brief description of agent purpose"
        }
      }
    },
    "metadata": {
      "type": "object",
      "required": ["owner", "status"],
      "properties": {
        "owner": {
          "type": "string",
          "description": "GitHub username or team slug responsible for this agent"
        },
        "status": {
          "type": "string",
          "enum": ["active", "deprecated", "experimental"],
          "description": "Current status of the agent"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags for categorizing and searching agents"
        },
        "slash_command": {
          "type": "string",
          "description": "Slash command to invoke this agent"
        }
      }
    },
    "expertise": {
      "type": "object",
      "properties": {
        "domains": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Areas of expertise for this agent"
        },
        "triggers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Events or conditions that should trigger this agent"
        }
      }
    },
    "permissions": {
      "type": "object",
      "required": ["read", "write"],
      "properties": {
        "read": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Resources this agent can read"
        },
        "write": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Resources this agent can write"
        },
        "restricted": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Resources this agent must not access"
        }
      }
    },
    "modes": {
      "type": "object",
      "required": ["dry_run"],
      "properties": {
        "dry_run": {
          "type": "boolean",
          "description": "If true, agent only simulates actions without making changes"
        },
        "interactive": {
          "type": "boolean",
          "description": "If true, agent can prompt for user input"
        },
        "auto_approve": {
          "type": "boolean",
          "description": "If true, agent can auto-approve low-risk actions"
        }
      }
    },
    "run": {
      "type": "object",
      "required": ["entrypoint"],
      "properties": {
        "entrypoint": {
          "type": "string",
          "description": "Path to the script that runs this agent"
        },
        "timeout": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum execution time in seconds"
        },
        "environment": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Environment variables to set when running the agent"
        }
      }
    },
    "review_criteria": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Key criteria this agent uses when reviewing"
    },
    "output_format": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["markdown", "json", "yaml", "text"],
          "description": "Format of agent output"
        },
        "template": {
          "type": "string",
          "description": "Output template or structure"
        }
      }
    }
  }
}
